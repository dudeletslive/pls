extends ../../layouts/alt

block content
	div.contact-list-home: div.jumbotron: .container
		div.title(style='position: relative;')
			span.icon.home
			h2 Mailing Lists
			h4(style='position: absolute; right: 0; top: 0;')
				a(href='/my-account') Edit My Account
		div.col-md-12.line
		div.col-md-12
			ul
				if lists.length >= 1
					for list in lists
						li.box
							.col-md-12
								img(src='../images/list-name.png')
								h2= list.prettyName
								a.btn.btn-sm.btn-gray(href='/mailing-lists/' + list.slug) VIEW LIST
								a.btn.btn-sm.btn-green(href='/mailing-lists/' + list.slug + '?contact=add') ADD CONTACT
					li.box(data-toggle='modal', data-target='#newList')
						.col-md-12
							img(src='../images/circle-plus-big.png')
							h2.title ADD NEW LIST
				else
					div.col-md-4
						li.box(data-toggle='modal', data-target='#newList')
							.col-md-12
								img(src='../images/circle-plus-big.png')
								h2.title ADD NEW LIST
					div.col-md-8
						p If you would like the PLS to maintain your mailing list online you have two options for getting your list to us:
						ul
							li: p You may upload your list directly to the website. Click here for instructions. Each time you sign in you will find your mailing list under My Mailing Lists.
							li: p You may email your mailing list as any type of file and in any format.  The columns and field names are not important.  The PLS will format the mailing list for you and connect the list to your account.  The next time you sign in the mailing list will appear under My Mailing Lists.
						p If you would like the PLS to maintain your mailing list in Access on our computer, please email your mailing list. 
						p If you plan to send us your mailing list with each order, you may skip this step.  Simply attach your mailing list during the ordering process.
						p If youâ€™re an existing client, feel free to start an order!


		//- Modal for Creating new Mailing List
		.modal.fade(tab-index='-1', role='dialog', aria-labelledby='newList', aria-hidden='true', id='newList')
			.modal-dialog.modal-sm: .modal-content: form(method="post", action='/mailing-lists', id='listForm', enctype='multipart/form-data')
				.modal-body
					button.close(type="button", data-dismiss="modal")
						span(aria-hidden="true") &#215;
						span.sr-only Close
					h3 Create New Mailing List
					if errors
						.form-group
							.alert.alert-danger
								| Please complete all fields before continuing.
					.form-group(class=(errors != null ? 'has-error' : null)).clearfix
						input(type='hidden', name='userID', value=user.id)
						//- input(type='hidden', name='csvJSON')
						input(type='hidden', name='name', value=user.name.full)
					.form-group(class=(errors != null ? 'has-error' : null)).clearfix
						label(for='listName') Name Your Mailing List*
						input(name='listName', type='text', class='form-control')
					.form-group.clearfix
						input(name='xlsFile', type='file', class='form-control', id='csv')
					small *Please make sure your mailing list is a .CSV file. Most applications allow you to export your list as a CSV. Click <a href="#" data-toggle="modal" data-target="#instructions">here</a> for information on how to do this.
				.modal-footer
					button.btn.btn-default(type="button", data-dismiss="modal") Cancel
					button.btn.btn-primary(type="submit") Create List

		//- Modal for Instructions
		.modal.fade(id='instructions')
			.modal-dialog
				.modal-content
					button.close(type="button", data-dismiss="modal")
						span(aria-hidden="true") &#215;
						span.sr-only Close
					.modal-body
						h3 Converting #{fileType} to CSV.
						ol
							li Open your excel file.
							li Click on File and Save as.
							li Select where you would like to save the file (like your desktop or a drive).
							img(src='images/image001.jpg', class='img-responsive')
							li In the File Name area, name your document.
							li In the Save as Type area, select CSV(Comma Delimited) from the pull down menu.
							img(src='images/image002.jpg', class='img-responsive')
							li Click Save.
							li You may receive one or two warnings about the formatting of .CSV, click yes.
					.modal-footer
						button.btn.btn-default(type="button", data-dismiss="modal") Thanks!

block js
	if errors
		script.
			$('#newList').modal();
	script.
		$('button[type="submit"]').click(function() {
			$(this).html('<i class="fa fa-spinner fa-spin"></i>');
		});